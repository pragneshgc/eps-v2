webpackJsonp([4],{"4sQB":function(t,e,a){var s=a("VU/8")(a("7pCi"),a("q6/4"),!1,null,null,null);t.exports=s.exports},"7pCi":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s,r=a("qF8l"),i=(s=r)&&s.__esModule?s:{default:s};function o(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}e.default={mixins:[i.default],data:function(){var t;return o(t={data:{},pharmacies:[],password:null,passwordFieldVisible:!1,passwordSecurityStatus:!1,code:"",authorizable:!1},"passwordFieldVisible",!1),o(t,"emailFieldVisible",!1),o(t,"loginCodeVisible",!1),o(t,"loading",!1),o(t,"errors",{}),o(t,"userInfo",userInfo),t},mounted:function(){this.getPharmacies(),userInfo.id!=this.$route.params.id&&userInfo.role<30?this.$router.push("/notallowed"):(this.getData(),this.getPasswordSecurityStatus())},computed:{tableUrl:function(){return"/inventory/user/"+this.$route.params.id},dataUrl:function(){return"/users/"+this.$route.params.id},postUrl:function(){return"/users/"+this.$route.params.id},loginAsUrl:function(){return"/login_as/"+this.$route.params.id}},methods:{getData:function(){var t=this;this.loading=!0,axios.get(this.dataUrl).then(function(e){t.data=e.data.data.userData,t.loading=!1}).catch(function(e){t.reportError(e)})},getPasswordSecurityStatus:function(t){var e=this;axios.get("/users/"+this.$route.params.id+"/2fa-status").then(function(t){e.passwordSecurityStatus=t.data.data,e.passwordSecurityStatus&&axios.get("/users/"+e.$route.params.id+"/2fa-code").then(function(t){e.code=t.data.data})}).catch(function(t){e.reportError(t)})},enable2fa:function(){var t=this;axios.post("/users/"+this.$route.params.id+"/2fa-enable").then(function(){t.getPasswordSecurityStatus()}).catch(function(e){t.reportError(e)})},disable2fa:function(){var t=this;axios.post("/users/"+this.$route.params.id+"/2fa-disable").then(function(){t.getPasswordSecurityStatus()}).catch(function(e){t.reportError(e)})},getPharmacies:function(){var t=this;axios.get("/pharmacies/list").then(function(e){t.pharmacies=e.data.data}).catch(function(e){t.reportError(e)})},togglePasswordChange:function(){this.passwordFieldVisible=!this.passwordFieldVisible},toggleEmailChange:function(){this.emailFieldVisible=!this.emailFieldVisible},toggleLoginCodeChange:function(){this.loginCodeVisible=!this.loginCodeVisible},update:function(){var t=this;this.loading=!0;var e={name:this.data.name,pharmacy_id:this.data.pharmacy_id,surname:this.data.surname,email:this.data.email,role:this.data.role,code:this.data.code};this.password&&(e.password=this.password),axios.post(this.postUrl,e).then(function(e){t.postSuccess(e.data.message),t.errors={},t.loading=!1}).catch(function(e){t.errors=e.response.data.errors,t.loading=!1})},loginAs:function(){axios.get(this.loginAsUrl).then(function(t){location.reload()}).catch(function(t){console.warn(t)})},generateCode:function(t){for(var e="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789$%()[]?!:@/",s=a.length,r=0;r<t;r++)e+=a.charAt(Math.floor(Math.random()*s));return e},storeCode:function(){this.data.code=this.generateCode(14)}}}},"q6/4":function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("section",{staticClass:"card"},[t._m(0),t._v(" "),a("div",{staticClass:"card-body"},[a("form",{staticClass:"text-center p-5",on:{submit:function(e){return e.preventDefault(),t.update(e)}}},[a("p",{staticClass:"h4 mb-3"},[t._v("User details")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.name,expression:"data.name"}],staticClass:"form-control tBoxSize02 mb-10",attrs:{type:"text",id:"name",placeholder:"Name"},domProps:{value:t.data.name},on:{input:function(e){e.target.composing||t.$set(t.data,"name",e.target.value)}}}),t._v(" "),t.errors.name?a("div",{staticClass:"invalid-feedback d-block"},[t._v(t._s(t.errors.name[0]))]):t._e(),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.surname,expression:"data.surname"}],staticClass:"form-control tBoxSize02 mb-10",attrs:{type:"text",id:"surname",placeholder:"Surname"},domProps:{value:t.data.surname},on:{input:function(e){e.target.composing||t.$set(t.data,"surname",e.target.value)}}}),t._v(" "),t.errors.surname?a("div",{staticClass:"invalid-feedback d-block"},[t._v(t._s(t.errors.surname[0]))]):t._e(),t._v(" "),a("br"),t._v(" "),a("label",[t._v("Role")]),t._v(" "),a("br"),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.data.role,expression:"data.role"}],staticClass:"browser-default custom-select mb-10",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.data,"role",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"5"}},[t._v("Shipping")]),t._v(" "),t.userInfo.role>=30?a("option",{attrs:{value:"30"}},[t._v("Pharmacy Admin")]):t._e(),t._v(" "),t.userInfo.role>=60?a("option",{attrs:{value:"50"}},[t._v("Admin")]):t._e(),t._v(" "),t.userInfo.role>=60?a("option",{attrs:{value:"60"}},[t._v("SysAdmin")]):t._e()]),t._v(" "),a("br"),t._v(" "),a("label",[t._v("Pharmacy")]),t._v(" "),a("br"),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.data.pharmacy_id,expression:"data.pharmacy_id"}],staticClass:"browser-default custom-select mb-10",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.data,"pharmacy_id",e.target.multiple?a:a[0])}}},t._l(t.pharmacies,function(e){return a("option",{key:e.PharmacyID,domProps:{value:e.PharmacyID}},[t._v(t._s(e.Title))])})),t._v(" "),t.errors.role?a("div",{staticClass:"invalid-feedback d-block"},[t._v(t._s(t.errors.role[0]))]):t._e(),t._v(" "),a("br"),t._v(" "),a("div",{staticStyle:{display:"flex","flex-direction":"column",width:"100%","align-items":"center","justify-content":"center"}},[a("p",[t._v("2FA is Currently "),t.passwordSecurityStatus?a("b",[t._v("Enabled")]):a("b",[t._v("Disabled")]),t._v(" for this account.")]),t._v(" "),t.passwordSecurityStatus?a("div",[a("div",{domProps:{innerHTML:t._s(t.code)}}),t._v(" "),a("p",[t._v("This QR code can be scanned by an authenticator app to start using it.")])]):t._e()]),t._v(" "),a("br"),t._v(" "),a("transition",{attrs:{name:"fade"}},[t.passwordFieldVisible?a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control tBoxSize02 mb-3",attrs:{autocomplete:"off",type:"password",name:"new-password",id:"password",placeholder:"Password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}):t._e(),t._v(" "),t.errors.password?a("div",{staticClass:"invalid-feedback d-block"},[t._v(t._s(t.errors.password[0]))]):t._e()]),t._v(" "),a("transition",{attrs:{name:"fade"}},[a("div",[t.loginCodeVisible?a("div",{staticClass:"input-group mb-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.code,expression:"data.code"}],staticClass:"form-control tBoxSize02 mb-10",staticStyle:{margin:"0!important"},attrs:{autocomplete:"off",type:"code",name:"code",id:"code",placeholder:"Login Code"},domProps:{value:t.data.code},on:{input:function(e){e.target.composing||t.$set(t.data,"code",e.target.value)}}}),t._v(" "),a("div",{staticClass:"input-group-append",staticStyle:{display:"inline"}},[a("button",{staticClass:"btn btnSize01 secondaryBtn m-0 z-depth-0 waves-effect",attrs:{type:"button",id:"button-addon2"},on:{click:function(e){t.storeCode()}}},[t._v("Generate Code")])])]):t._e(),t._v(" "),t.errors.code?a("div",{staticClass:"invalid-feedback d-block"},[t._v(t._s(t.errors.code[0]))]):t._e()])]),t._v(" "),a("br"),t._v(" "),a("transition",{attrs:{name:"fade"}},[t.emailFieldVisible?a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.email,expression:"data.email"}],staticClass:"form-control tBoxSize02 mb-10",attrs:{type:"email",id:"email",placeholder:"E-mail"},domProps:{value:t.data.email},on:{input:function(e){e.target.composing||t.$set(t.data,"email",e.target.value)}}}):t._e(),t._v(" "),t.errors.email?a("div",{staticClass:"invalid-feedback d-block"},[t._v(t._s(t.errors.email[0]))]):t._e()]),t._v(" "),a("br"),t._v(" "),a("div",[a("button",{staticClass:"btn btnSize01 secondaryBtn",attrs:{type:"button"},on:{click:t.togglePasswordChange}},[t._v("Change password")]),t._v(" "),a("button",{staticClass:"btn btnSize01 secondaryBtn",attrs:{type:"button"},on:{click:t.toggleEmailChange}},[t._v("Change email")]),t._v(" "),a("button",{staticClass:"btn btnSize01 secondaryBtn",attrs:{type:"button"},on:{click:t.toggleLoginCodeChange}},[t._v("Change login code")]),t._v(" "),t.passwordSecurityStatus?t._e():a("button",{staticClass:"btn btnSize01 secondaryBtn",attrs:{type:"button"},on:{click:t.enable2fa}},[t._v("Enable 2FA")]),t._v(" "),t.passwordSecurityStatus?a("button",{staticClass:"btn btnSize01 secondaryBtn",attrs:{type:"button"},on:{click:t.disable2fa}},[t._v("Disable 2FA")]):t._e(),t._v(" "),t.userInfo.role>=50?a("button",{staticClass:"btn btnSize01 secondaryBtn",attrs:{type:"button"},on:{click:t.loginAs}},[t._v("Login as user")]):t._e(),t._v(" "),a("button",{staticClass:"btn btnSize01 secondaryBtn",attrs:{type:"submit"}},[t._v("Update")])])],1)])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"card-header"},[e("h3",[this._v("User details")])])}]}}});