import{_ as f,E as b,r as y,c as l,a as t,e as g,f as r,v as n,t as i,g as d,h as A,F as c,i as m,b as C,o as a,d as k}from"./app-jXeI2irY.js";import{T as v}from"./vue3-treeselect.cjs.min-DxZvkgTm.js";const I={mixins:[b],components:{Treeselect:v},data:function(){return{data:{},countries:[],banlist:[],loading:!1,errors:{},userInfo,file:"",fileDataURL:""}},mounted(){userInfo.id!=this.$route.params.id&&userInfo.role<50?this.$router.push("/notallowed"):(this.getData(),this.getCountries(),this.getBanList())},computed:{inputText(){return this.file!=""?this.file.name:"Click to upload a new logo"},imageSrc(){return this.file==""?`/pharmacies/logo/${this.$route.params.id}`:URL.createObjectURL(this.file)},tableUrl:function(){return"/inventory/user/"+this.$route.params.id},dataUrl:function(){return"/pharmacies/"+this.$route.params.id},postUrl:function(){return"/pharmacies/"+this.$route.params.id}},methods:{getData:function(){this.loading=!0,axios.get(this.dataUrl).then(e=>{this.data=e.data.data,this.loading=!1}).catch(e=>{this.reportError(e)})},getCountries(){axios.get("/countries").then(e=>{this.countries=e.data.data}).catch(e=>{this.reportError(e)})},getBanList(){axios.get(`/pharmacies/${this.$route.params.id}/banlist`).then(e=>{this.banlist=[],e.data.data.forEach(o=>{this.banlist.push(o.TypeID)})}).catch(e=>{this.reportError(e)})},update:function(){this.loading=!0,this.file!=""&&this.uploadSignature();let e={Title:this.data.Title,Location:this.data.Location,AccountNumber:this.data.AccountNumber,BillingAccountNumber:this.data.BillingAccountNumber,ShipperName:this.data.ShipperName,VATNumber:this.data.VATNumber,EORI:this.data.EORI,Telephone:this.data.Telephone,Email:this.data.Email,Address1:this.data.Address1,Address2:this.data.Address2,Address3:this.data.Address3,Address4:this.data.Address4,Postcode:this.data.Postcode,Contents:this.data.Contents,CountryCode:this.data.CountryCode,BanList:this.banlist,Details:this.data.details};axios.post(this.postUrl,e).then(o=>{this.postSuccess(o.data.message),this.errors={},this.loading=!1}).catch(o=>{this.errors=o.response.data.errors,this.loading=!1})},inputClick(){document.getElementById("file").click()},attachFile(){let e=document.getElementById("file").files;e.length&&(this.file=e[0])},uploadSignature(){let e=new FormData;e.append("image",this.file),axios.post(`/pharmacies/logo/${this.$route.params.id}`,e,{headers:{"Content-type":"multipart/form-data"}}).then(o=>{this.postSuccess("Signature updated"),document.getElementById("file").value="",this.file=""}).catch(o=>{this.postSuccess("Failed to update signature"),this.file=""})},selectOpen(e){e=="status-extended"&&document.querySelector('[data-instance-id="status-extended"]').firstChild.classList.add("vue-treeselect__menu-container-body")},normalizer(e){return{id:e.CountryID,label:e.Name}}}},S={class:"content"},D={class:"card"},N=t("div",{class:"card-header"},[t("h3",null,"Pharmacy details")],-1),B={class:"card-body pharmacy-edit"},T={style:{display:"inline-flex","justify-content":"space-around","flex-direction":"column",width:"49%",padding:"10px"}},V=t("p",{class:"h4",style:{"margin-bottom":"10px"}},"Pharmacy Details",-1),_=t("label",{style:{"text-align":"left"},for:"pharmacyID"},"Pharmacy ID",-1),U=["value"],E=t("label",{style:{"text-align":"left"},for:"Title"},"Title",-1),L={key:0,class:"invalid-feedback d-block"},z=t("label",{style:{"text-align":"left"},for:"Location"},"Location",-1),x={key:1,class:"invalid-feedback d-block"},P=t("label",{style:{"text-align":"left"},for:"Telephone"},"Shipper Telephone",-1),$={key:2,class:"invalid-feedback d-block"},O=t("label",{style:{"text-align":"left"},for:"Email"},"Shipper Email",-1),w={key:3,class:"invalid-feedback d-block"},R=t("label",{style:{"text-align":"left"},for:"Contents"},"Contents",-1),F=t("small",{style:{"text-align":"left"}},"This tag is used for DHL shipping",-1),j={key:4,class:"invalid-feedback d-block"},H={style:{display:"inline-flex","justify-content":"space-around","flex-direction":"column",width:"49%",padding:"10px"}},M=t("p",{class:"h4",style:{"margin-bottom":"10px"}},"Delivery Details",-1),q=t("label",{style:{"text-align":"left"},for:"Address1"},"Shipper Address 1",-1),G={key:0,class:"invalid-feedback d-block"},J=t("label",{style:{"text-align":"left"},for:"Address2"},"Shipper Address 2",-1),K={key:1,class:"invalid-feedback d-block"},Q=t("label",{style:{"text-align":"left"},for:"Address3"},"Shipper Address 3",-1),W={key:2,class:"invalid-feedback d-block"},X=t("label",{style:{"text-align":"left"},for:"Address4"},"Shipper Address 4",-1),Y={key:3,class:"invalid-feedback d-block"},Z=t("label",{style:{"text-align":"left"},for:"Postcode"},"Shipper Postcode",-1),ee={key:4,class:"invalid-feedback d-block"},te=t("label",{style:{"text-align":"left"},for:"CountryCode"},"Shipper Country Code",-1),se=t("option",{disabled:"",placeholder:"",selected:"",value:"null"},"Select Country",-1),oe=["value"],le={key:5,class:"invalid-feedback d-block"},ae=t("label",{style:{"text-align":"center"},for:"CountryBanlist"},"Country Blacklist",-1),ie=t("hr",{style:{"margin-top":"20px","margin-bottom":"20px"}},null,-1),re=t("div",{class:"card-header",style:{"margin-bottom":"20px"}},[t("h3",null,"Client details")],-1),de={class:"h4",style:{"margin-bottom":"10px"}},ne=["for"],ue=["onUpdate:modelValue","id"],pe={key:0,class:"invalid-feedback d-block"},ce=["for"],me=["onUpdate:modelValue","id"],he={key:1,class:"invalid-feedback d-block"},fe=["for"],be=["onUpdate:modelValue","id"],ye={key:2,class:"invalid-feedback d-block"},ge=["for"],Ae=["onUpdate:modelValue","id"],Ce={key:3,class:"invalid-feedback d-block"},ke=["for"],ve=["onUpdate:modelValue","id"],Ie={key:4,class:"invalid-feedback d-block"},Se=t("hr",{style:{"margin-top":"20px","margin-bottom":"20px"}},null,-1),De=t("div",null,[t("button",{class:"btn btnSize01 secondaryBtn",type:"submit"},"Update")],-1),Ne=t("hr",{style:{"margin-top":"20px","margin-bottom":"20px"}},null,-1),Be=t("h4",null,"Pharmacy Logo",-1),Te=["src"],Ve={class:"input-mask mt-10"},_e={class:"file-info"};function Ue(e,o,Ee,Le,ze,u){const h=y("treeselect");return a(),l("div",S,[t("section",D,[N,t("div",B,[t("form",{class:"text-center p-5",onSubmit:o[14]||(o[14]=g((...s)=>u.update&&u.update(...s),["prevent"]))},[t("div",T,[V,_,t("input",{disabled:"",value:`Pharmacy ID: ${e.data.PharmacyID}`,type:"text",id:"PharmacyID",class:"form-control tBoxSize02 mb-10",placeholder:"Pharmacy ID"},null,8,U),E,r(t("input",{"onUpdate:modelValue":o[0]||(o[0]=s=>e.data.Title=s),type:"text",id:"Title",class:"form-control tBoxSize02 mb-10",placeholder:"Title"},null,512),[[n,e.data.Title]]),e.errors.Title?(a(),l("div",L,i(e.errors.Title[0]),1)):d("",!0),z,r(t("input",{"onUpdate:modelValue":o[1]||(o[1]=s=>e.data.Location=s),type:"text",id:"Location",class:"form-control tBoxSize02 mb-10",placeholder:"Location"},null,512),[[n,e.data.Location]]),e.errors.Location?(a(),l("div",x,i(e.errors.Location[0]),1)):d("",!0),P,r(t("input",{"onUpdate:modelValue":o[2]||(o[2]=s=>e.data.Telephone=s),type:"text",id:"Telephone",class:"form-control tBoxSize02 mb-10",placeholder:"Telephone"},null,512),[[n,e.data.Telephone]]),e.errors.Telephone?(a(),l("div",$,i(e.errors.Telephone[0]),1)):d("",!0),O,r(t("input",{"onUpdate:modelValue":o[3]||(o[3]=s=>e.data.Email=s),type:"text",id:"Email",class:"form-control tBoxSize02 mb-10",placeholder:"Email"},null,512),[[n,e.data.Email]]),e.errors.Email?(a(),l("div",w,i(e.errors.Email[0]),1)):d("",!0),R,r(t("input",{"onUpdate:modelValue":o[4]||(o[4]=s=>e.data.Contents=s),type:"text",id:"Contents",class:"form-control tBoxSize02 mb-10",placeholder:"Contents"},null,512),[[n,e.data.Contents]]),F,e.errors.Contents?(a(),l("div",j,i(e.errors.Contents[0]),1)):d("",!0)]),t("div",H,[M,q,r(t("input",{"onUpdate:modelValue":o[5]||(o[5]=s=>e.data.Address1=s),type:"text",id:"Address1",class:"form-control tBoxSize02 mb-10",placeholder:"Address1"},null,512),[[n,e.data.Address1]]),e.errors.Address1?(a(),l("div",G,i(e.errors.Address1[0]),1)):d("",!0),J,r(t("input",{"onUpdate:modelValue":o[6]||(o[6]=s=>e.data.Address2=s),type:"text",id:"Address2",class:"form-control tBoxSize02 mb-10",placeholder:"Address2"},null,512),[[n,e.data.Address2]]),e.errors.Address2?(a(),l("div",K,i(e.errors.Address2[0]),1)):d("",!0),Q,r(t("input",{"onUpdate:modelValue":o[7]||(o[7]=s=>e.data.Address3=s),type:"text",id:"Address3",class:"form-control tBoxSize02 mb-10",placeholder:"Address3"},null,512),[[n,e.data.Address3]]),e.errors.Address3?(a(),l("div",W,i(e.errors.Address3[0]),1)):d("",!0),X,r(t("input",{"onUpdate:modelValue":o[8]||(o[8]=s=>e.data.Address4=s),type:"text",id:"Address4",class:"form-control tBoxSize02 mb-10",placeholder:"Address4"},null,512),[[n,e.data.Address4]]),e.errors.Address4?(a(),l("div",Y,i(e.errors.Address4[0]),1)):d("",!0),Z,r(t("input",{"onUpdate:modelValue":o[9]||(o[9]=s=>e.data.Postcode=s),type:"text",id:"Postcode",class:"form-control tBoxSize02 mb-10",placeholder:"Postcode"},null,512),[[n,e.data.Postcode]]),e.errors.Postcode?(a(),l("div",ee,i(e.errors.Postcode[0]),1)):d("",!0),te,r(t("select",{"onUpdate:modelValue":o[10]||(o[10]=s=>e.data.CountryCode=s),class:"browser-default custom-select mb-10",id:"CountryCode"},[se,(a(!0),l(c,null,m(e.countries,s=>(a(),l("option",{key:s.CountryID,value:s.CountryID},i(s.Name),9,oe))),128))],512),[[A,e.data.CountryCode]]),e.errors.CountryCode?(a(),l("div",le,i(e.errors.CountryCode[0]),1)):d("",!0)]),ae,C(h,{style:{width:"500px","max-width":"100%!important"},class:"vue-treeselect-reports","open-on-click":!0,"open-on-focus":!0,"open-on-hover":!0,multiple:!0,clearable:!0,searchable:!0,"disable-branch-nodes":!1,placeholder:"Select countries to blacklist","show-count":!0,"default-expand-level":1,"append-to-body":!1,options:e.countries,onOpen:u.selectOpen,normalizer:u.normalizer,modelValue:e.banlist,"onUpdate:modelValue":o[11]||(o[11]=s=>e.banlist=s)},null,8,["options","onOpen","normalizer","modelValue"]),ie,re,(a(!0),l(c,null,m(e.data.clients,s=>(a(),l("div",{key:s.ClientId,style:{display:"inline-flex","justify-content":"space-around","flex-direction":"column",width:"33%",padding:"10px"}},[t("p",de,[t("b",null,i(s.CompanyName),1),k(" (ID: "+i(s.ClientID)+")",1)]),t("label",{style:{"text-align":"left"},for:`ShipperName${s.ClientID}`},"Shipper Name",8,ne),r(t("input",{"onUpdate:modelValue":p=>e.data.details[s.ClientID].ShipperName=p,type:"text",id:`ShipperName${s.ClientID}`,class:"form-control tBoxSize02 mb-10",placeholder:"ShipperName"},null,8,ue),[[n,e.data.details[s.ClientID].ShipperName]]),e.errors.ShipperName?(a(),l("div",pe,i(e.errors.ShipperName[0]),1)):d("",!0),t("label",{style:{"text-align":"left"},for:`AccountNumber${s.ClientID}`},"DHL Shipper Account Number",8,ce),r(t("input",{"onUpdate:modelValue":p=>e.data.details[s.ClientID].AccountNumber=p,type:"text",id:`AccountNumber${s.ClientID}`,class:"form-control tBoxSize02 mb-10",placeholder:"AccountNumber"},null,8,me),[[n,e.data.details[s.ClientID].AccountNumber]]),e.errors.AccountNumber?(a(),l("div",he,i(e.errors.AccountNumber[0]),1)):d("",!0),t("label",{style:{"text-align":"left"},for:`BillingAccountNumber${s.ClientID}`},"DHL Billing Account Number",8,fe),r(t("input",{"onUpdate:modelValue":p=>e.data.details[s.ClientID].BillingAccountNumber=p,type:"text",id:`BillingAccountNumber${s.ClientID}`,class:"form-control tBoxSize02 mb-10",placeholder:"BillingAccountNumber"},null,8,be),[[n,e.data.details[s.ClientID].BillingAccountNumber]]),e.errors.BillingAccountNumber?(a(),l("div",ye,i(e.errors.BillingAccountNumber[0]),1)):d("",!0),t("label",{style:{"text-align":"left"},for:`VATNumber${s.ClientID}`},"VAT Number",8,ge),r(t("input",{"onUpdate:modelValue":p=>e.data.details[s.ClientID].VATNumber=p,type:"text",id:`VATNumber${s.ClientID}`,class:"form-control tBoxSize02 mb-10",placeholder:"VATNumber"},null,8,Ae),[[n,e.data.details[s.ClientID].VATNumber]]),e.errors.VATNumber?(a(),l("div",Ce,i(e.errors.VATNumber[0]),1)):d("",!0),t("label",{style:{"text-align":"left"},for:`EORI${s.ClientID}`},"EORI",8,ke),r(t("input",{"onUpdate:modelValue":p=>e.data.details[s.ClientID].EORI=p,type:"text",id:`EORI${s.ClientID}`,class:"form-control tBoxSize02 mb-10",placeholder:"EORI"},null,8,ve),[[n,e.data.details[s.ClientID].EORI]]),e.errors.EORI?(a(),l("div",Ie,i(e.errors.EORI[0]),1)):d("",!0)]))),128)),Se,De,Ne,t("div",{class:"prescriber__signature-upload clickable",style:{display:"inline-block"},onClick:o[13]||(o[13]=(...s)=>u.inputClick&&u.inputClick(...s))},[Be,t("img",{style:{width:"300px"},class:"mt-10",src:u.imageSrc,alt:""},null,8,Te),t("input",{type:"file",name:"tracking",id:"file",ref:"file",accept:".jpg, .jpeg, .png",onChange:o[12]||(o[12]=(...s)=>u.attachFile&&u.attachFile(...s))},null,544),t("div",Ve,[t("span",_e,i(u.inputText),1)])])],32)])])])}const $e=f(I,[["render",Ue]]);export{$e as default};
//# sourceMappingURL=Pharmacy-4CwbIbGV.js.map
